# See https://pre-commit.com for more information
# See https://pre-commit.com/hooks.html for more hooks
repos:
  # General file checks
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
    - id: trailing-whitespace
    - id: end-of-file-fixer
    - id: check-yaml
      args: ['--unsafe']  # Allow custom YAML tags
    - id: check-added-large-files
      args: ['--maxkb=1000']
    - id: check-json
    - id: check-toml
    - id: check-merge-conflict
    - id: detect-private-key

  # Python code formatting
  - repo: https://github.com/psf/black-pre-commit-mirror
    rev: 23.11.0
    hooks:
    - id: black
      language_version: python3.12

  # Import sorting
  - repo: https://github.com/pycqa/isort
    rev: 6.1.0
    hooks:
    - id: isort
      args: ["--profile", "black", "--line-length", "120"]

  # Type checking
  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.13.0
    hooks:
    - id: mypy
      additional_dependencies: [types-PyYAML, types-requests, pydantic]
      args: [--ignore-missing-imports, --warn-unused-ignores]
      exclude: ^tests/

  # Optional: Uncomment to enable pytest on pre-commit
  # - repo: local
  #   hooks:
  #   - id: pytest-check
  #     name: pytest
  #     stages: [pre-commit]
  #     types: [python]
  #     entry: poetry run pytest -v
  #     language: system
  #     pass_filenames: false
  #     always_run: true
  #
  #   - id: pytest-coverage
  #     name: pytest-coverage
  #     stages: [pre-commit]
  #     types: [python]
  #     entry: poetry run pytest --cov=src --cov-fail-under=80
  #     language: system
  #     pass_filenames: false
  #     always_run: true
